#!/usr/bin/clisp -ansi -q -E utf-8

;; If the version of clisp requires -Kfull to have linux, then let's call it with -Kfullâ€¦
(multiple-value-bind (res err) (ignore-errors (require "linux"))
  (when err
    (let* ((argv  (ext:argv))
           (largv (length argv))
           (args  ext:*args*)
           (largs (length args))
           (pname (elt argv (- largv largs 1))))
      (ext:exit
       (or (EXT:RUN-PROGRAM "/usr/bin/clisp"
                            :ARGUMENTS (append '("-ansi" "-q" "-E" "utf-8" "-Kfull")
                                               (cons pname args))
                            :wait t
                            #+linux :MAY-EXEC  #+linux t
                            #+win32 :INDIRECTP #+win32 nil)
           0)))))


(load "~/quicklisp/setup.lisp")
(ql:quickload :com.informatimago.common-lisp)
(ql:quickload :com.informatimago.clisp)
(ql:quickload :com.informatimago.susv3)

(ext:exit 0)
